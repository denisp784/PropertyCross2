<form #registerForm="ngForm" (ngSubmit)="register()">
    <modal-body *ngIf="isRegister">
        <div class="form-group">
            <label for="login">Логин</label>
            <input type="text" class="add-text form-control"
                   name="login"
                   id="login" required
                   [(ngModel)]="user.login" #login="ngModel" pattern="^[а-яА-ЯёЁa-zA-Z0-9]{3,}$">
            <div class="input-error" [hidden]="login.valid || login.untouched">
                Только буквы и цифры. Длина не менее 3 символов
            </div>
        </div>
        <div class="form-group">
            <label for="password">Пароль</label>
            <input type="password" class="add-text form-control"
                   name="password"
                   id="password" required
                   [(ngModel)]="user.password" #password="ngModel"
                   pattern="(?=^.{6,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$">
            <div class="input-error" [hidden]="password.valid || password.untouched">
                Минимум одна цифра, строчная и заглавная латинская буква. Длина не менее 6 символов
            </div>
        </div>
        <div class="form-group">
            <label for="email">Email</label>
            <input type="text" class="add-text form-control"
                   name="email"
                   id="email" required
                   [(ngModel)]="user.email" #email="ngModel" pattern="^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$">
            <div class="input-error" [hidden]="email.valid || email.untouched">
                Введите корректный email
            </div>
        </div>
        <div class="form-group">
            <label for="fio">ФИО</label>
            <input type="text" class="add-text form-control"
                   name="fio"
                   id="fio" required
                   [(ngModel)]="user.fio" #fio="ngModel">
            <div class="input-error" [hidden]="fio.valid || fio.untouched">
                Введите фамилию, имя и отчество
            </div>
        </div>
        <div class="form-group">
            <label for="address">Адрес</label>
            <input type="text" class="add-text form-control"
                   name="address"
                   id="address" required
                   [(ngModel)]="user.address" #address="ngModel">
            <div class="input-error" [hidden]="address.valid || address.untouched">
                Введите адрес
            </div>
        </div>
    </modal-body>
</form>

<form #loginForm="ngForm" (ngSubmit)="logIn()">
    <modal-body *ngIf="!isRegister">

        <div class="form-group">
            <label for="login">Логин</label>
            <input type="text" class="add-text form-control"
                   name="login"
                   (keydown)="resetCorrectLogin()"
                   id="login1" required
                   [ngClass]="{'error': !isCorrectLogin}"
                   [(ngModel)]="user.login" #login="ngModel">
            <div class="input-error" [hidden]="isCorrectLogin">
                Пользователь с таким логином не зарегистрирован
            </div>
        </div>
        <div class="form-group">
            <label for="password">Пароль</label>
            <input type="password" class="add-text form-control"
                   name="password"
                   (keydown)="resetCorrectPassword()"
                   id="password1" required
                   [ngClass]="{'error': !isCorrectPassword || (password.invalid && password.dirty)}"
                   [(ngModel)]="user.password" #password="ngModel">
            <div class="input-error" [hidden]="isCorrectPassword">
                Неверный пароль
            </div>
        </div>

    </modal-body>
</form>

<modal-footer>
    <span class="delete" (click)="switchRegister()">
        {{isRegister ? 'У меня есть аккаунт. Войти' : 'У меня ещё нет аккаунта. Зарегистрироваться'}}
    </span>

    <button type="button" class="btn btn-default" data-dismiss="modal" (click)="dialog.cancel()">Отмена
    </button>

    <button *ngIf="isRegister" type="submit" class="btn btn-primary"
            (click)="register()"
            [disabled]="!registerForm.form.valid">Регистрация</button>

    <button *ngIf="!isRegister" type="submit"
            class="btn btn-primary" (click)="logIn()"
            [disabled]="!loginForm.form.valid">Войти
    </button>
</modal-footer>
